<!--
  This is template for hugo menus, accepts MenuEntity as context
  https://gohugo.io/variables/menus/
-->
{{ if . }}
  {{ template "book-menu-hugo" . }}
{{ end }}

{{ define "book-menu-hugo" }}
<ul>
  {{ range . }}
  <li>
    <a href="{{ .URL }}" {{ if and (not .Page) (and (not (eq .Name "Home")) (not (eq .Name "Diary"))) }}target="_self" rel="noopener"{{ end }} >
        {{- .Pre -}}
          {{ with .Page }}
            <p class="book-icon book-menu-item-icon"> {{ partial "docs/icon" .Page }} </p>
            <p class=book-menu-item-text> {{ partial "docs/title" .Page }} </p>
          {{ else }}
            <p class=book-menu-item-text> {{ .Name }} </p>
          {{ end }}
        <p class=book-menu-item-text> {{- .Post -}} </p>
    </a>
    {{- with .Children }}
      {{ template "book-menu-hugo" . }}
    {{- end }}
  </li>
  {{ end }}
</ul>
{{ end }}
